<!doctype html><html lang=en><head><meta charset=UTF-8><title>Jul24th</title><link rel=stylesheet href=/css/style.css><script>window.allArticles={"1_Projects":{"01.编程语言":{"113-【JAVA学习】生态":{"113.05-Maven":{"113.05.101-【maven插件】Maven插件开发.md":{_isFile:!0}}}}}}</script><style>html,body{height:100vh;margin:0;overflow:hidden}main{flex:1;overflow:auto}</style></head><body style=min-height:100vh;display:flex;flex-direction:column><div style="width:100vw;z-index:100;padding:.5em 0;font-size:.95em"><header style="background:#f8f9fa;box-shadow:0 2px 8px rgba(0,0,0,4%);padding:1em 2em;display:flex;justify-content:space-between;align-items:center"><div><h1 style=margin:0><a href=/>Jul24th</a></h1></div><nav><ul style=list-style:none;display:flex;gap:1.5em;margin:0;padding:0><li><a href=http://github.com/lovears>github</a></li></ul></nav></header></div><main style=flex:1><style>body{background:linear-gradient(120deg,#f0f4f8 0%,#e8fbe8 100%);font-family:segoe ui,pingfang sc,hiragino sans gb,arial,sans-serif;color:#222;margin:0}.main-container{display:grid;grid-template-columns:1fr 320px;gap:2.5em;max-width:1280px;margin:3em auto;padding:0 2em;background:rgba(255,255,255,.7);border-radius:24px;box-shadow:0 8px 40px rgba(0,0,0,8%)}article{background:#fff;border-radius:20px;box-shadow:0 6px 32px rgba(0,0,0,7%);padding:3em 2.5em 3.5em;min-width:0;transition:box-shadow .2s;position:relative;z-index:1}article:hover{box-shadow:0 12px 48px rgba(0,0,0,.13)}header h1{margin:0 0 .3em;font-size:2.7em;font-weight:900;letter-spacing:1.5px;color:#007acc;text-shadow:0 2px 12px rgba(0,122,204,8%)}header h2{margin:0 0 .7em;font-size:1.25em;color:#6a7a8c;font-weight:400;letter-spacing:.5px}header div{color:#888;font-size:1em;margin-bottom:.5em}header hr{border:none;border-top:1.5px solid #e3e8ee;margin:2em 0 1.5em}section{line-height:1.9;font-size:1.13em;word-break:break-word;color:#2d3748}.highlight{padding:16px 20px;background:#f6f8fa;border-radius:10px;overflow:auto;font-size:1em;border:1px solid #e3e8ee;margin:1.5em 0;box-shadow:0 2px 8px rgba(0,0,0,4%);white-space:pre-wrap;word-break:break-all}#my-comments{margin-top:3em;background:#f8fafc;border-radius:12px;box-shadow:0 2px 12px rgba(0,0,0,6%);padding:2em 1.5em 1.5em}#my-comments h3{margin-bottom:1em;color:#007acc;font-size:1.18em;letter-spacing:1px}#commentForm{margin-bottom:1.5em;display:flex;flex-wrap:wrap;gap:.7em 1em;align-items:flex-start}#commentForm input,#commentForm textarea{border:1px solid #d0d7de;border-radius:6px;background:#f8fafc;font-size:1em;transition:border .2s;padding:.5em .8em}#commentForm textarea{min-height:70px;flex:1 1 100%;padding:.7em .9em;resize:vertical;margin-top:.2em}#commentForm input:focus,#commentForm textarea:focus{border:1.5px solid #007acc;outline:none;background:#fff}#commentForm button{padding:.6em 1.5em;background:linear-gradient(90deg,#007acc 60%,#28a745 100%);color:#fff;border:none;border-radius:6px;font-size:1em;font-weight:500;cursor:pointer;box-shadow:0 1px 4px rgba(0,0,0,6%);transition:background .2s,box-shadow .2s}#commentForm button:hover{background:linear-gradient(90deg,#005fa3 60%,#218838 100%);box-shadow:0 2px 8px rgba(0,0,0,.1)}#commentList>div{margin-bottom:1em;padding-bottom:.7em;border-bottom:1px solid #eee;background:#fff;border-radius:7px;padding:.7em 1em;box-shadow:0 1px 4px rgba(0,0,0,3%)}aside{display:flex;flex-direction:column;gap:2.2em;position:sticky;top:2em;align-self:flex-start;z-index:2}#toc-nav,.sidebar-block{background:#f6f8fa;border-radius:14px;box-shadow:0 2px 12px rgba(0,0,0,7%);padding:2em 1.5em;font-size:1em;max-height:60vh;overflow:auto}#toc-nav>div:first-child{font-weight:700;margin-bottom:1em;color:#444;letter-spacing:1px;font-size:1.12em}.tag,.category{border-radius:16px;padding:.22em 1.1em;font-size:1em;margin-bottom:.2em;border:1px solid;display:inline-block;transition:background .2s,color .2s;cursor:pointer;font-weight:500;letter-spacing:.5px}.tag{background:#e6f4ff;color:#007acc;border-color:#b6e0fe}.tag:hover{background:#d0eaff;color:#005fa3}.category{background:#e9fbe8;color:#28a745;border-color:#b6eec7}.category:hover{background:#d2f5d0;color:#218838}.sidebar-block h2{font-size:1.08em;margin:0 0 .5em;letter-spacing:1px;font-weight:700}.sidebar-block h2:first-child{color:#007acc}.sidebar-block h2:last-of-type{color:#28a745}.sidebar-block>div{display:flex;flex-wrap:wrap;gap:.4em}.floating-btns{position:fixed;right:36px;bottom:36px;z-index:999;display:flex;flex-direction:column;gap:18px}.floating-btns a,.floating-btns button{display:flex;align-items:center;justify-content:center;width:56px;height:56px;background:#007acc;color:#fff;border-radius:50%;box-shadow:0 2px 12px rgba(0,0,0,.13);font-size:1.7em;text-decoration:none;border:none;cursor:pointer;transition:background .2s,box-shadow .2s}.floating-btns button{background:#28a745}.floating-btns a:hover{background:#005fa3}.floating-btns button:hover{background:#218838}@media(max-width:1100px){.main-container{grid-template-columns:1fr;gap:2em;padding:0 1em}aside{position:static;width:100%;max-width:100%}}@media(max-width:700px){.main-container{padding:0 .2em;border-radius:0;box-shadow:none}article{padding:1.2em .7em 2em;border-radius:0}#my-comments{padding:1.2em .7em 1em}aside{padding:0}.floating-btns{right:12px;bottom:12px}}</style><div class=main-container><article><header><h1>113.05.101-【maven插件】Maven插件开发</h1><div><span>2025-06-16</span>
&nbsp;|&nbsp;<span>作者: 2Dreams</span></div><hr></header><section><h2 id=maven阶段phase>Maven阶段（phase）</h2><p>Maven插件的phase（阶段）是指Maven在构建过程中执行插件的特定时间点。每个phase都是一个特定的构建阶段，以确定的顺序来执行，并且可以在pom.xml文件中定义和自定义。</p><p>以下是常见的Maven插件阶段：</p><ol><li>validate - 验证项目是否正确并且所有的必要信息可用。</li><li>initialize - 初始化构建参数，如设置版本号、获取外部依赖等。</li><li>generate-sources - 生成源代码。</li><li>process-sources - 处理源代码，在编译之前处理源文件。</li><li>generate-resources - 生成项目使用的资源文件。</li><li>process-resources - 对项目资源文件进行处理。</li><li>compile - 编译源代码。</li><li>process-classes - 处理编译后的字节码。</li><li>generate-test-sources - 生成测试源代码。</li><li>process-test-sources - 处理测试源代码，在编译测试代码之前处理源文件。</li><li>generate-test-resources - 生成测试使用的资源文件。</li><li>process-test-resources - 处理测试资源文件。</li><li>test-compile - 编译测试代码。</li><li>process-test-classes - 处理测试类文件。</li><li>test - 运行测试。</li><li>package - 打包成可分发的格式，如jar、war等。</li><li>pre-integration-test - 集成测试前的准备工作。</li><li>integration-test - 进行集成测试。</li><li>post-integration-test - 集成测试后的清理工作。</li><li>verify - 对集成测试结果进行验证。</li><li>install - 安装到本地仓库。</li><li>deploy - 发布到远程仓库。
其中，每个阶段都有唯一的标识符，例如，compile阶段的标识符是"compile"，test阶段的标识符是"test"，依此类推。开发人员可以在pom.xml文件中配置插件将其绑定指定的phase上。</li></ol><p>总之，Maven插件的phase根据构建过程中的不同阶段来定义，开发人员可以根据需要在pom.xml文件中按照指定的顺序来绑定 phase 和 plugin，从而实现特定的构建操作。</p><h2 id=maven插件中获取本地仓库路径>Maven插件中获取本地仓库路径</h2><p>在 Maven 插件开发中，可以通过 org.apache.maven.repository.RepositorySystem 类来获取本地仓库路径。下面是具体的代码实现方式：</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">18
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#f92672>import</span> org.apache.maven.repository.RepositorySystem;
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> org.apache.maven.settings.Settings;
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> org.codehaus.plexus.component.annotations.Component;
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> org.codehaus.plexus.component.annotations.Requirement;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>@Component</span>(role <span style=color:#f92672>=</span> MyPlugin.<span style=color:#a6e22e>class</span>, hint <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;myPlugin&#34;</span>)
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>MyPlugin</span> <span style=color:#66d9ef>extends</span> AbstractMojo {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Requirement</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>private</span> RepositorySystem repositorySystem;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Parameter</span>(defaultValue <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;${settings}&#34;</span>, readonly <span style=color:#f92672>=</span> <span style=color:#66d9ef>true</span>)
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>private</span> Settings settings;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>execute</span>() <span style=color:#66d9ef>throws</span> MojoExecutionException {
</span></span><span style=display:flex><span>        String localRepoPath <span style=color:#f92672>=</span> settings.<span style=color:#a6e22e>getLocalRepository</span>();
</span></span><span style=display:flex><span>        <span style=color:#75715e>// do something with the local repository path</span>
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></td></tr></table></div></div><p>在上述代码中，通过 <code>@Requirement</code> 注解和 <code>RepositorySystem</code> 类的实例变量 <code>repositorySystem</code> 获取了仓库系统的对象。随后，又通过 <code>@Parameter</code> 注解和 <code>Settings</code> 类的实例变量 <code>settings</code> 获取了 <code>Maven</code> 的全局设置。</p><p>最后，在 <code>execute()</code> 方法中，通过 <code>settings.getLocalRepository()</code> 方法获取本地仓库路径。需要注意的是，该路径默认是 <code>${user.home}/.m2/repository</code>，即用户目录下的 <code>.m2</code> 文件夹里的 <code>repository</code> 目录。如果用户设定了自己的本地仓库路径，则会返回设定的路径。</p><p>通过以上代码就可以获取到本地仓库的路径了。</p><h2 id=maven插件中下载指定给的jar包>Maven插件中下载指定给的jar包</h2><h3 id=使用maven-artifact-resolver-api-来下载指定的jar包具体实现步骤>使用<code>Maven Artifact Resolver API</code> 来下载指定的jar包，具体实现步骤</h3><ol><li>添加 <code>Maven Artifact Resolver API</code>依赖</li></ol><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-xml data-lang=xml><span style=display:flex><span><span style=color:#f92672>&lt;dependency&gt;</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>&lt;groupId&gt;</span>org.apache.maven.resolver<span style=color:#f92672>&lt;/groupId&gt;</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>&lt;artifactId&gt;</span>maven-resolver-api<span style=color:#f92672>&lt;/artifactId&gt;</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>&lt;version&gt;</span>1.6.3<span style=color:#f92672>&lt;/version&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;/dependency&gt;</span>
</span></span></code></pre></td></tr></table></div></div><p>2.创建<code>Maven</code>标准解析器</p><p>使用一下代码创 <code>Maven</code> 标准解析器</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span>DefaultRepositorySystemSession session <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> DefaultRepositorySystemSession();
</span></span><span style=display:flex><span>RepositorySystem system <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> RepositorySystem();
</span></span><span style=display:flex><span>LocalRepository localRepo <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> LocalRepository(<span style=color:#e6db74>&#34;/path/to/local/repo&#34;</span>);
</span></span><span style=display:flex><span>session.<span style=color:#a6e22e>setLocalRepositoryManager</span>(system.<span style=color:#a6e22e>newLocalRepositoryManager</span>(session, localRepo));
</span></span></code></pre></td></tr></table></div></div><p>其中，<code>localRepo</code>参数是本地仓库的路径; 参见: <strong>Maven插件中获取本地仓库路径</strong></p><p>3.创建 <code>Artifact</code>对象
使用以下代码创建 Artifact 对象：</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span>Artifact artifact <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> DefaultArtifact(<span style=color:#e6db74>&#34;groupId&#34;</span>, <span style=color:#e6db74>&#34;artifactId&#34;</span>, <span style=color:#e6db74>&#34;version&#34;</span>);
</span></span></code></pre></td></tr></table></div></div><p>4.下载<code>jar</code>包</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">6
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span>RemoteRepository repo <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> RemoteRepository.<span style=color:#a6e22e>Builder</span>(<span style=color:#e6db74>&#34;remote-repo&#34;</span>, <span style=color:#e6db74>&#34;default&#34;</span>, <span style=color:#e6db74>&#34;http://repo.maven.apache.org/maven2/&#34;</span>).<span style=color:#a6e22e>build</span>();
</span></span><span style=display:flex><span>ArtifactRequest artifactRequest <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> ArtifactRequest();
</span></span><span style=display:flex><span>artifactRequest.<span style=color:#a6e22e>setArtifact</span>(artifact);
</span></span><span style=display:flex><span>artifactRequest.<span style=color:#a6e22e>setRepositories</span>(Collections.<span style=color:#a6e22e>singletonList</span>(repo));
</span></span><span style=display:flex><span>ArtifactResult artifactResult <span style=color:#f92672>=</span> system.<span style=color:#a6e22e>resolveArtifact</span>(session, artifactRequest);
</span></span><span style=display:flex><span>File jarFile <span style=color:#f92672>=</span> artifactResult.<span style=color:#a6e22e>getArtifact</span>().<span style=color:#a6e22e>getFile</span>();
</span></span></code></pre></td></tr></table></div></div><p>其中，<code>repo</code>参数为远程仓库对象，<code>artifactRequest</code>参数为 Artifact 请求对象。</p><p>最后，我们可以通过 jarFile 获得下载下来的 Jar 包文件。</p><h2 id=通过pomxml来获取子模块的信息artifactidgroupid等>通过pom.xml来获取子模块的信息(artifactId、groupId等)</h2><p>在 <code>Maven</code> 插件开发中，如果需要获取子模块的 <code>Artifact ID</code> 和 <code>Group ID</code>，可以通过以下方式实现：</p><ol><li>获取 <code>Maven</code> 项目对象模型（<code>Project Object Model，POM</code>）
使用以下代码获取 <code>Maven</code> 项目对象模型：</li></ol><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span>MavenProject project <span style=color:#f92672>=</span> (MavenProject) getPluginContext().<span style=color:#a6e22e>get</span>(<span style=color:#e6db74>&#34;project&#34;</span>);
</span></span></code></pre></td></tr></table></div></div><p>2.获取子模块的信息
使用 <code>project</code> 对象获取子模块的信息：</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span>String groupId <span style=color:#f92672>=</span> project.<span style=color:#a6e22e>getChild</span>(<span style=color:#e6db74>&#34;child-module&#34;</span>).<span style=color:#a6e22e>getGroupId</span>();
</span></span><span style=display:flex><span>String artifactId <span style=color:#f92672>=</span> project.<span style=color:#a6e22e>getChild</span>(<span style=color:#e6db74>&#34;child-module&#34;</span>).<span style=color:#a6e22e>getArtifactId</span>();
</span></span></code></pre></td></tr></table></div></div><p>其中，<code>child-module</code> 参数指代要获取信息的子模块的名称。</p><p>3.完整示例
以下是一个完整的示例，展示了如何在 Maven 插件中获取子模块的 Artifact ID 和 Group ID：</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>ExampleMojo</span> <span style=color:#66d9ef>extends</span> AbstractMojo {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Parameter</span>(defaultValue <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;${project}&#34;</span>)
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>private</span> MavenProject project;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>execute</span>() <span style=color:#66d9ef>throws</span> MojoExecutionException {
</span></span><span style=display:flex><span>        String groupId <span style=color:#f92672>=</span> project.<span style=color:#a6e22e>getChild</span>(<span style=color:#e6db74>&#34;child-module&#34;</span>).<span style=color:#a6e22e>getGroupId</span>();
</span></span><span style=display:flex><span>        String artifactId <span style=color:#f92672>=</span> project.<span style=color:#a6e22e>getChild</span>(<span style=color:#e6db74>&#34;child-module&#34;</span>).<span style=color:#a6e22e>getArtifactId</span>();
</span></span><span style=display:flex><span>        getLog().<span style=color:#a6e22e>info</span>(<span style=color:#e6db74>&#34;Child Module Group ID: &#34;</span> <span style=color:#f92672>+</span> groupId);
</span></span><span style=display:flex><span>        getLog().<span style=color:#a6e22e>info</span>(<span style=color:#e6db74>&#34;Child Module Artifact ID: &#34;</span> <span style=color:#f92672>+</span> artifactId);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></td></tr></table></div></div><p>其中，<code>@Parameter(defaultValue = "${project}")</code> 注解指定了要注入 <code>MavenProject</code> 类型的参数，从而获取 <code>Maven</code> 项目对象模型。<code>execute()</code> 方法中的代码展示了如何使用 <code>getChild()</code> 方法获取子模块的信息，并输出至日志中。</p><h2 id=通过指定的pomxml来创建mavenproject对象>通过指定的<code>pom.xml</code>来创建<code>MavenProject</code>对象</h2><p>在 Maven 插件开发中，如果需要通过指定 pom.xml 来创建 MavenProject 对象，可以使用以下代码实现：</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span>MavenProject mavenProject <span style=color:#f92672>=</span> <span style=color:#66d9ef>null</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>try</span> {
</span></span><span style=display:flex><span>    File pom <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> File(<span style=color:#e6db74>&#34;path/to/pom.xml&#34;</span>);
</span></span><span style=display:flex><span>    MavenXpp3Reader reader <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> MavenXpp3Reader();
</span></span><span style=display:flex><span>    Model model <span style=color:#f92672>=</span> reader.<span style=color:#a6e22e>read</span>(<span style=color:#66d9ef>new</span> FileReader(pom));
</span></span><span style=display:flex><span>    model.<span style=color:#a6e22e>setPomFile</span>(pom);
</span></span><span style=display:flex><span>    mavenProject <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> MavenProject(model);
</span></span><span style=display:flex><span>} <span style=color:#66d9ef>catch</span> (Exception e) {
</span></span><span style=display:flex><span>    <span style=color:#75715e>// handle exception</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></td></tr></table></div></div><p>其中，<code>path/to/pom.xml</code> 参数指定了要读取的 <code>pom.xml</code> 文件的路径。 <code>MavenXpp3Reader</code> 类是 <code>Maven</code> 内置的 POM 解析器，用于读取和解析 <code>pom.xml</code> 文件的内容。Model 类表示 <code>Maven</code> 模型，在插件开发中可用于获取 <code>Maven</code> 项目的相关信息。 <code>setPomFile()</code> 方法将 pom.xml 文件与模型进行关联，从而完成模型的初始化。最后，使用 <code>MavenProject</code> 的构造函数将模型转换为 <code>Maven</code> 项目对象。</p><p>注意：在使用该方法时，需要保证指定的 <code>pom.xml</code> 文件符合 <code>Maven</code> 的 <code>POM</code> 规范，否则可能会导致模型解析失败，抛出异常。</p><h2 id=多个git仓库使用maven工程编译打包>多个Git仓库使用Maven工程编译打包</h2><p>可以使用 Maven Git Commit ID Plugin 将多个 Git 仓库下的 Maven 工程编译打包集成。具体步骤如下：</p><p>在根 pom.xml 中添加 Maven Git Commit ID Plugin 插件：</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">16
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-xml data-lang=xml><span style=display:flex><span><span style=color:#f92672>&lt;build&gt;</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>&lt;plugins&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;plugin&gt;</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>&lt;groupId&gt;</span>pl.project13.maven<span style=color:#f92672>&lt;/groupId&gt;</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>&lt;artifactId&gt;</span>git-commit-id-plugin<span style=color:#f92672>&lt;/artifactId&gt;</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>&lt;version&gt;</span>4.0.0<span style=color:#f92672>&lt;/version&gt;</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>&lt;executions&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;execution&gt;</span>
</span></span><span style=display:flex><span>          <span style=color:#f92672>&lt;goals&gt;</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>&lt;goal&gt;</span>revision<span style=color:#f92672>&lt;/goal&gt;</span>
</span></span><span style=display:flex><span>          <span style=color:#f92672>&lt;/goals&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;/execution&gt;</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>&lt;/executions&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;/plugin&gt;</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>&lt;/plugins&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;/build&gt;</span>
</span></span></code></pre></td></tr></table></div></div><p>配置每个需要打包的 <code>Maven</code> 工程的 <code>pom.xml</code>，将版本号设置为<code>${git.commit.id.abbrev}</code>。例如：</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-xml data-lang=xml><span style=display:flex><span><span style=color:#f92672>&lt;version&gt;</span>${git.commit.id.abbrev}<span style=color:#f92672>&lt;/version&gt;</span>
</span></span></code></pre></td></tr></table></div></div><p>使用 Maven 进行编译打包。执行以下命令可将 Git 仓库下所有 Maven 工程编译打包：</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>mvn clean package
</span></span></code></pre></td></tr></table></div></div><p>编译结果会输出到每个 Maven 工程的 target 目录下。</p><h2 id=获取dependency的实际版本>获取<code>dependency</code>的实际版本</h2><p>在 Maven 插件开发中，可以使用 <code>Maven Dependency Plugin</code> 来获取项目的依赖信息，包括实际版本号。</p><p>具体来说，可以通过在插件的 Java 代码中使用以下代码段，来获取项目所有依赖的实际版本号：</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">9
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#75715e>// 获取 Maven 项目对象模型</span>
</span></span><span style=display:flex><span>MavenProject project <span style=color:#f92672>=</span> (MavenProject) getPluginContext().<span style=color:#a6e22e>get</span>(<span style=color:#e6db74>&#34;project&#34;</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 获取所有依赖并遍历</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>for</span> (Dependency dependency : project.<span style=color:#a6e22e>getDependencies</span>()) {
</span></span><span style=display:flex><span>    <span style=color:#75715e>// 获取实际解析后的版本号</span>
</span></span><span style=display:flex><span>    String version <span style=color:#f92672>=</span> dependency.<span style=color:#a6e22e>getVersion</span>();
</span></span><span style=display:flex><span>    getLog().<span style=color:#a6e22e>info</span>(<span style=color:#e6db74>&#34;Dependency: &#34;</span> <span style=color:#f92672>+</span> dependency.<span style=color:#a6e22e>getGroupId</span>() <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;:&#34;</span> <span style=color:#f92672>+</span> dependency.<span style=color:#a6e22e>getArtifactId</span>() <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;:&#34;</span> <span style=color:#f92672>+</span> version);
</span></span><span style=display:flex><span>}
</span></span></code></pre></td></tr></table></div></div><p>在这个示例代码中，<code>MavenProject</code> 对象表示 Maven 项目对象模型，<code>getPluginContext()</code> 方法可以获取插件上下文对象，从而调用 project 属性来获取项目对象模型。然后，通过遍历 dependencies 属性数组，可以获取每个依赖的 version 属性来获取解析后的实际版本号。</p><p>需要注意的是，如果项目中存在任何未解析的依赖，则获取的版本号可能不准确，因此在实际使用时应该先运行 Maven 解析依赖。</p><h2 id=获取dependencymanagement中dependency的实际版本号>获取<code>dependencyManagement</code>中<code>dependency</code>的实际版本号</h2><p>在 Maven 插件开发中，要获取 dependencyManagement 中声明的依赖的实际版本号，可以使用 Maven 依赖解析 API。以下是一个示例代码片段：</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">14
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#75715e>// 获取 MavenSession 对象</span>
</span></span><span style=display:flex><span>MavenSession session <span style=color:#f92672>=</span> ...;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 获取 DependencyManagement 对象</span>
</span></span><span style=display:flex><span>DependencyManagement depMgt <span style=color:#f92672>=</span> session.<span style=color:#a6e22e>getCurrentProject</span>().<span style=color:#a6e22e>getDependencyManagement</span>();
</span></span><span style=display:flex><span><span style=color:#66d9ef>if</span> (depMgt <span style=color:#f92672>!=</span> <span style=color:#66d9ef>null</span>) {
</span></span><span style=display:flex><span>    <span style=color:#75715e>// 获取所有声明的依赖</span>
</span></span><span style=display:flex><span>    List<span style=color:#f92672>&lt;</span>Dependency<span style=color:#f92672>&gt;</span> deps <span style=color:#f92672>=</span> depMgt.<span style=color:#a6e22e>getDependencies</span>();
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>for</span> (Dependency dep : deps) {
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 获取实际版本号</span>
</span></span><span style=display:flex><span>        String version <span style=color:#f92672>=</span> session.<span style=color:#a6e22e>getRepositorySession</span>().<span style=color:#a6e22e>getVersion</span>(dep);
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(dep.<span style=color:#a6e22e>getGroupId</span>() <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;:&#34;</span> <span style=color:#f92672>+</span> dep.<span style=color:#a6e22e>getArtifactId</span>() <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;:&#34;</span> <span style=color:#f92672>+</span> version);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></td></tr></table></div></div><p>该代码将获取当前项目的依赖管理（<code>dependencyManagement</code>）配置，并遍历其中所有的依赖项。然后，对于每个依赖项，调用 <code>getRepositorySession().getVersion(dep)</code> 方法来获取实际版本号。</p><p>需要注意的是，如果您要在 Maven 插件中使用此代码，应该将其放在 <code>execute</code> 方法中，以便在执行插件时运行。此外，还需要将项目对象传递给插件并使用 <code>MavenSession</code> 对象来获取依赖项的实际版本号。</p><h2 id=使用dependencymanagement中但未在dependencies中引入的jar包>使用<code>dependencyManagement</code>中但未在<code>dependencies</code>中引入的<code>jar</code>包</h2><p>在 Maven 插件开发中，如果依赖在 <code>dependencyManagement</code> 中声明，但是并没有在 <code>dependencies</code> 中引入，那么在编译插件时使用这个依赖是不会起作用的。</p><p>这是因为 <code>dependencyManagement</code> 只是对一个版本的依赖进行了声明性描述，而并没有将其真正引入到项目中。只有当在 <code>dependencies</code> 中引入了这个依赖时，它才会被实际地下载和添加到项目中。</p><p>在插件开发中，如果需要使用 <code>dependencyManagement</code> 中声明的依赖，可以在 dependencies 中显式引入它们，或者使用 <code>Maven</code> 依赖解析 API 获取实际版本号并手动添加到插件的类路径中。</p><p>以下是一个示例代码片段，展示如何通过 <code>Maven</code> 依赖解析 API 获取 <code>dependencyManagement</code> 中声明的依赖的实际版本号，并将其添加到插件的类路径中：</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">20
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#75715e>// 获取 MavenSession 对象</span>
</span></span><span style=display:flex><span>MavenSession session <span style=color:#f92672>=</span> ...;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 获取 DependencyManagement 对象</span>
</span></span><span style=display:flex><span>DependencyManagement depMgt <span style=color:#f92672>=</span> session.<span style=color:#a6e22e>getCurrentProject</span>().<span style=color:#a6e22e>getDependencyManagement</span>();
</span></span><span style=display:flex><span><span style=color:#66d9ef>if</span> (depMgt <span style=color:#f92672>!=</span> <span style=color:#66d9ef>null</span>) {
</span></span><span style=display:flex><span>    <span style=color:#75715e>// 获取所有声明的依赖</span>
</span></span><span style=display:flex><span>    List<span style=color:#f92672>&lt;</span>Dependency<span style=color:#f92672>&gt;</span> deps <span style=color:#f92672>=</span> depMgt.<span style=color:#a6e22e>getDependencies</span>();
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>for</span> (Dependency dep : deps) {
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 获取实际版本号</span>
</span></span><span style=display:flex><span>        String version <span style=color:#f92672>=</span> session.<span style=color:#a6e22e>getRepositorySession</span>().<span style=color:#a6e22e>getVersion</span>(dep);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 将依赖添加到插件的类路径中</span>
</span></span><span style=display:flex><span>        URLClassLoader classLoader <span style=color:#f92672>=</span> (URLClassLoader) getClass().<span style=color:#a6e22e>getClassLoader</span>();
</span></span><span style=display:flex><span>        URL url <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> URL(<span style=color:#e6db74>&#34;file://&#34;</span> <span style=color:#f92672>+</span> localRepo.<span style=color:#a6e22e>getBasedir</span>() <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;/&#34;</span> <span style=color:#f92672>+</span> <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>remoteRepositoryPathResolver</span>.<span style=color:#a6e22e>getRepositoryPath</span>(dep.<span style=color:#a6e22e>getGroupId</span>(), dep.<span style=color:#a6e22e>getArtifactId</span>(), version, dep.<span style=color:#a6e22e>getType</span>()));
</span></span><span style=display:flex><span>        Method addUrlMethod <span style=color:#f92672>=</span> URLClassLoader.<span style=color:#a6e22e>class</span>.<span style=color:#a6e22e>getDeclaredMethod</span>(<span style=color:#e6db74>&#34;addURL&#34;</span>, URL.<span style=color:#a6e22e>class</span>);
</span></span><span style=display:flex><span>        addUrlMethod.<span style=color:#a6e22e>setAccessible</span>(<span style=color:#66d9ef>true</span>);
</span></span><span style=display:flex><span>        addUrlMethod.<span style=color:#a6e22e>invoke</span>(classLoader, url);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></td></tr></table></div></div><p>这里使用反射调用 <code>URLClassLoader</code> 的 <code>addURL()</code> 方法，将依赖的 JAR 文件添加到插件的类路径中。这样就可以在插件中使用依赖了。</p><h2 id=获取>获取</h2><p>如果你需要在Maven插件中获取在<code>dependencyManagement</code>中声明但未显示引入的依赖的版本号，可以使用Maven工具链API来实现。具体步骤如下：</p><p>获取Maven项目对象模型（<code>Project Object Model，POM</code>），可以使用<code>MavenSession.getProjects()</code>方法获取所有项目对象。</p><p>遍历项目对象，检查其<code>dependencyManagement</code>部分是否包含所需的依赖项。如果找到了该依赖项的声明，则可以通过调用<code>DependencyManagement.getDependencies()</code>方法获取其版本号。</p><p>以下是一个示例代码片段，它演示了如何在Maven插件中获取<code>dependencyManagement</code>中声明但未明确引入的依赖的版本号：</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">15
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>execute</span>(MavenSession session) <span style=color:#66d9ef>throws</span> MojoExecutionException {
</span></span><span style=display:flex><span>    <span style=color:#75715e>// 获取所有项目对象</span>
</span></span><span style=display:flex><span>    List<span style=color:#f92672>&lt;</span>MavenProject<span style=color:#f92672>&gt;</span> projects <span style=color:#f92672>=</span> session.<span style=color:#a6e22e>getProjects</span>();
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// 遍历所有项目对象</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>for</span> (MavenProject project : projects) {
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 检查项目对象的dependencyManagement部分是否包含所需的依赖项</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>for</span> (Dependency dependency : project.<span style=color:#a6e22e>getDependencyManagement</span>().<span style=color:#a6e22e>getDependencies</span>()) {
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>if</span> (<span style=color:#e6db74>&#34;com.example&#34;</span>.<span style=color:#a6e22e>equals</span>(dependency.<span style=color:#a6e22e>getGroupId</span>()) <span style=color:#f92672>&amp;&amp;</span> <span style=color:#e6db74>&#34;example-artifact&#34;</span>.<span style=color:#a6e22e>equals</span>(dependency.<span style=color:#a6e22e>getArtifactId</span>())) {
</span></span><span style=display:flex><span>                <span style=color:#75715e>// 如果找到了该依赖项的声明，则打印其版本号</span>
</span></span><span style=display:flex><span>                getLog().<span style=color:#a6e22e>info</span>(<span style=color:#e6db74>&#34;Version of com.example:example-artifact is &#34;</span> <span style=color:#f92672>+</span> dependency.<span style=color:#a6e22e>getVersion</span>());
</span></span><span style=display:flex><span>            }
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></td></tr></table></div></div><p>注意，在Maven插件中获取<code>dependencyManagement</code>中声明但未明确引入的依赖的版本号，需要使用Maven工具链API和POM模型来实现，因此在执行插件时必须要有正确的项目信息和环境配置。</p></section><div id=my-comments><h3>评论</h3><form id=commentForm><input type=text id=commentName placeholder=昵称 required style="flex:0 0 120px">
<input type=text id=commentAccount placeholder=社交账号(可选) style="flex:0 0 160px">
<textarea id=commentContent placeholder=请输入评论内容 required></textarea>
<button type=submit>发表评论</button></form><div id=commentList></div></div><script>const form=document.getElementById("commentForm"),list=document.getElementById("commentList");function escapeHtml(e){return e.replace(/[&<>"']/g,function(e){return{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"}[e]})}form.onsubmit=function(e){e.preventDefault();const s=escapeHtml(document.getElementById("commentName").value.trim()||"匿名"),t=escapeHtml(document.getElementById("commentAccount").value.trim()),n=escapeHtml(document.getElementById("commentContent").value.trim());if(!n)return;const o=(new Date).toLocaleString(),i=`<div>
                        <div style="font-weight:bold;">${s}${t?" <span style='color:#888;font-size:0.95em;'>@"+t+"</span>":""} <span style="color:#bbb;font-size:0.9em;">${o}</span></div>
                        <div style="margin-top:0.3em;white-space:pre-wrap;">${n}</div>
                    </div>`;list.insertAdjacentHTML("afterbegin",i),form.reset()}</script></article><aside><nav id=toc-nav><div>目录</div><div class=toc-list><nav id=TableOfContents><ul><li><a href=#maven阶段phase>Maven阶段（phase）</a></li><li><a href=#maven插件中获取本地仓库路径>Maven插件中获取本地仓库路径</a></li><li><a href=#maven插件中下载指定给的jar包>Maven插件中下载指定给的jar包</a><ul><li><a href=#使用maven-artifact-resolver-api-来下载指定的jar包具体实现步骤>使用<code>Maven Artifact Resolver API</code> 来下载指定的jar包，具体实现步骤</a></li></ul></li><li><a href=#通过pomxml来获取子模块的信息artifactidgroupid等>通过pom.xml来获取子模块的信息(artifactId、groupId等)</a></li><li><a href=#通过指定的pomxml来创建mavenproject对象>通过指定的<code>pom.xml</code>来创建<code>MavenProject</code>对象</a></li><li><a href=#多个git仓库使用maven工程编译打包>多个Git仓库使用Maven工程编译打包</a></li><li><a href=#获取dependency的实际版本>获取<code>dependency</code>的实际版本</a></li><li><a href=#获取dependencymanagement中dependency的实际版本号>获取<code>dependencyManagement</code>中<code>dependency</code>的实际版本号</a></li><li><a href=#使用dependencymanagement中但未在dependencies中引入的jar包>使用<code>dependencyManagement</code>中但未在<code>dependencies</code>中引入的<code>jar</code>包</a></li><li><a href=#获取>获取</a></li></ul></nav></div></nav><div class=sidebar-block><h2>Tags</h2><div><span class=tag>maven</span>
<span class=tag>插件</span>
<span class=tag>java</span></div><div style=margin-top:1.2em></div><h2>Categories</h2><div></div></div></aside></div><div class=floating-btns><a href=/ title=返回主页><span style=font-size:1.3em>🏠</span>
</a><button id=backToTopBtn title=回到顶部>
<span style=font-size:1.3em>↑</span>
</button>
<script>document.getElementById("backToTopBtn").addEventListener("click",function(){window.scrollTo({top:0,behavior:"smooth"})})</script></div></main><footer style="background:#f8f9fa;text-align:center;padding:.5em 0;box-shadow:0 -2px 8px rgba(0,0,0,4%);width:100vw;z-index:10"><p>&copy; 2025 Jul24th</p></footer></body></html>